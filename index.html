<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุณูู Pi | ุงูููุงูุดุฉ</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <img src="images/pi-logo.png" alt="Pi Logo" onerror="this.src='https://via.placeholder.com/40'">
                <span>ุณูู Pi</span>
            </div>
            <div class="nav-links">
                <a href="index.html">ุงูุฑุฆูุณูุฉ</a>
                <a href="cars.html">ุณูุงุฑุงุช</a>
                <a href="electronics.html">ุฅููุชุฑูููุงุช</a>
                <a href="appliances.html">ููุฑุจุงุฆูุงุช</a>
                <a href="realestate.html">ุนูุงุฑุงุช</a>
                <a href="cv.html">ุฎุฏูุงุช</a>
                <a href="blog.html">ูุฏููุฉ</a>
            </div>
            <div style="display: flex; align-items: center;">
                <span class="connection-status" id="piStatus">โณ ุฌุงุฑู ุงูุงุชุตุงู...</span>
                <div class="pi-balance" id="piBalance">
                    <span>๐ท</span>
                    <span id="balanceAmount">0.00</span>
                    <span>Pi</span>
                </div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div class="welcome-card">
            <h1>ูุฑุญุจุงู ุจู ูู <span>ุณูู Pi</span></h1>
            <p>ุฃูู ุณูู ูุชุนุฏุฏ ุงูุจุงุฆุนูู ุนูู ุดุจูุฉ Pi Network ูู ุงูุฃุฑุฏู</p>
            <div class="wallet-info">
                <strong>ูุญูุธุฉ ุงูุชุทุจูู:</strong> GC3YQ...Z656N
            </div>
            <div class="pi-stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalProducts">+100</div>
                    <div class="stat-label">ููุชุฌ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalSellers">+25</div>
                    <div class="stat-label">ุจุงุฆุน</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="totalTransactions">+500</div>
                    <div class="stat-label">ุตููุฉ</div>
                </div>
            </div>
            <div class="domain-badge">
                ๐ alhawawsheh.pi ูุฑูุจุงู
            </div>
        </div>

        <h2 class="section-title">ุชุณูู ุญุณุจ ุงููุณู</h2>
        <div class="categories-grid">
            <a href="cars.html" class="category-card">
                <div class="category-icon"><span>๐</span></div>
                <h3>ุงูุณูุงุฑุงุช</h3>
                <p>ุฃุญุฏุซ ููุฏููุงุช ุงูุณูุงุฑุงุช ุงูููุฑุจุงุฆูุฉ</p>
                <span class="product-count" id="carsCount">...</span>
            </a>
            <a href="electronics.html" class="category-card">
                <div class="category-icon"><span>๐ฑ</span></div>
                <h3>ุงูุฅููุชุฑูููุงุช</h3>
                <p>ููุงุชูุ ุฃุฌูุฒุฉุ ุฅูุณุณูุงุฑุงุช</p>
                <span class="product-count" id="electronicsCount">...</span>
            </a>
            <a href="appliances.html" class="category-card">
                <div class="category-icon"><span>๐</span></div>
                <h3>ุงูููุฑุจุงุฆูุงุช</h3>
                <p>ุฃุฌูุฒุฉ ููุฒููุฉุ ุฅููุชุฑูููุงุช</p>
                <span class="product-count" id="appliancesCount">...</span>
            </a>
            <a href="realestate.html" class="category-card">
                <div class="category-icon"><span>๐</span></div>
                <h3>ุงูุนูุงุฑุงุช</h3>
                <p>ุดููุ ูููุ ุฃุฑุงุถู</p>
                <span class="product-count" id="realestateCount">...</span>
            </a>
            <a href="cv.html" class="category-card">
                <div class="category-icon"><span>๐</span></div>
                <h3>ุงูุฎุฏูุงุช</h3>
                <p>ุณูุฑุฉ ุฐุงุชูุฉุ ุชุตูููุ ุชุทููุฑ</p>
                <span class="product-count" id="servicesCount">...</span>
            </a>
            <a href="blog.html" class="category-card">
                <div class="category-icon"><span>๐</span></div>
                <h3>ุงููุฏููุฉ</h3>
                <p>ุฃุฎุจุงุฑ ูููุงูุงุช ุนู Pi</p>
                <span class="product-count">30 ููุงู</span>
            </a>
        </div>
    </div>

    <footer class="footer">
        <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2026 ุณูู Pi | ุงูููุงูุดุฉ</p>
        <p>ูุนูู ุนูู ุดุจูุฉ Testnet - ุงุณุชุนุฏุงุฏุงู ููุฅุทูุงู ุนูู Mainnet</p>
    </footer>

    <div class="welcome-message" id="welcomeMessage">
        <strong>๐ ุฃูููู ุจู ูู ุณูู Pi!</strong>
        <p style="margin-top: 5px;">ุงุณุชุนุฏ ููุชุณูู ุจู Pi</p>
    </div>

    <script>
        const APP_CONFIG = {
            appId: 'souq-pi-test', // ุถุน ูุนุฑู ุงูุชุทุจูู ุงูุตุญูุญ
            apiKey: '2fpnxjfbpwk85aoad2bmqmny2q5he9l10ymsnvf2vhibgfclmastpashjbihkeef', // ุถุน ููุชุงุญ API
            walletAddress: 'GC3YQ...Z656N',
            piToJod: 314159 // 1 Pi = 314159 ุฏููุงุฑ ุฃุฑุฏูู (ูุงุจู ููุชุบููุฑ ูุณุชูุจูุงู)
        };

        const PiMarketplace = {
            isConnected: false,
            currentUser: null,

            init: function() {
                this.checkPiSDK();
                this.updateConnectionStatus();
                this.showWelcomeMessage();
                this.loadCategoryCounts();
            },

            checkPiSDK: function() {
                if (window.Pi) {
                    this.initPiSDK();
                } else {
                    setTimeout(() => this.checkPiSDK(), 1000);
                }
            },

            initPiSDK: function() {
                try {
                    window.Pi.init({
                        appId: APP_CONFIG.appId,
                        onReady: () => {
                            console.log('โ Pi SDK ุฌุงูุฒ');
                            this.isConnected = true;
                            this.updateConnectionStatus(true);
                            this.authenticateUser();
                        },
                        onError: (error) => {
                            console.error('โ ุฎุทุฃ ูู Pi SDK:', error);
                            this.updateConnectionStatus(false);
                        }
                    });
                } catch (error) {
                    console.error('โ ูุดู ุชููุฆุฉ Pi:', error);
                    this.updateConnectionStatus(false);
                }
            },

            authenticateUser: function() {
                window.Pi.authenticate(['payments'])
                    .then((auth) => {
                        this.currentUser = auth;
                        this.loadUserBalance();
                        document.getElementById('welcomeMessage').innerHTML = `
                            <strong>๐ ูุฑุญุจุงู ${auth.user.username || 'ุนููููุง ุงูุนุฒูุฒ'}!</strong>
                            <p>ุฑุตูุฏู: ${auth.user.balance || 0} Pi</p>
                        `;
                    })
                    .catch(console.log);
            },

            updateConnectionStatus: function(connected = false) {
                const el = document.getElementById('piStatus');
                if (connected) {
                    el.textContent = 'โ ูุชุตู ุจู Pi';
                    el.className = 'connection-status connected';
                } else {
                    el.textContent = 'โ ุบูุฑ ูุชุตู';
                    el.className = 'connection-status';
                }
            },

            loadUserBalance: function() {
                document.getElementById('balanceAmount').textContent = '6.25'; // ูุคูุช
            },

            showWelcomeMessage: function() {
                setTimeout(() => {
                    const msg = document.getElementById('welcomeMessage');
                    msg.classList.add('show');
                    setTimeout(() => msg.classList.remove('show'), 5000);
                }, 2000);
            },

            convertToPi: function(priceJOD) {
                return (priceJOD / APP_CONFIG.piToJod).toFixed(6);
            },

            loadCategoryCounts: async function() {
                const API_URL = 'https://sheetdb.io/api/v1/xxxxxxxxxxxxxx'; // ุถุน ุฑุงุจุท API ููุง
                try {
                    const res = await fetch(API_URL);
                    const products = await res.json();
                    const counts = {
                        ุณูุงุฑุงุช: products.filter(p => p.category === 'ุณูุงุฑุงุช').length,
                        ุฅููุชุฑูููุงุช: products.filter(p => p.category === 'ุฅููุชุฑูููุงุช').length,
                        ููุฑุจุงุฆูุงุช: products.filter(p => p.category === 'ููุฑุจุงุฆูุงุช').length,
                        ุนูุงุฑุงุช: products.filter(p => p.category === 'ุนูุงุฑุงุช').length,
                        ุฎุฏูุงุช: products.filter(p => p.category === 'ุฎุฏูุงุช').length
                    };
                    document.getElementById('carsCount').textContent = counts.ุณูุงุฑุงุช + ' ููุชุฌ';
                    document.getElementById('electronicsCount').textContent = counts.ุฅููุชุฑูููุงุช + ' ููุชุฌ';
                    document.getElementById('appliancesCount').textContent = counts.ููุฑุจุงุฆูุงุช + ' ููุชุฌ';
                    document.getElementById('realestateCount').textContent = counts.ุนูุงุฑุงุช + ' ููุชุฌ';
                    document.getElementById('servicesCount').textContent = counts.ุฎุฏูุงุช + ' ููุชุฌ';
                } catch (e) {
                    console.error('ูุดู ุชุญููู ุงูุฅุญุตุงุฆูุงุช', e);
                }
            }
        };

        document.addEventListener('DOMContentLoaded', () => PiMarketplace.init());
    </script>
</body>
</html>
